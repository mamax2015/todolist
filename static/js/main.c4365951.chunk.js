(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,t,a){},24:function(e,t,a){e.exports=a(38)},29:function(e,t,a){},38:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),i=a(21),c=a.n(i),r=(a(29),a(1)),s=a(2),l=a(4),d=a(3),u=a(6),h=a(5),m=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={title:""},a.onChange=a.onChange.bind(Object(u.a)(a)),a.saveNewTodo=a.saveNewTodo.bind(Object(u.a)(a)),a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"onChange",value:function(e){this.setState({title:e.target.value})}},{key:"saveNewTodo",value:function(){this.props.saveNewTodo(this.state.title),this.setState({title:""})}},{key:"render",value:function(){return o.a.createElement("div",{className:""},o.a.createElement("input",{type:"text",className:"form-control add-todo",placeholder:"Add a ToDo...","aria-label":"Add a ToDo...","aria-describedby":"basic-addon2",value:this.state.title,onChange:this.onChange}),o.a.createElement("button",{className:"btn btn-success",onClick:this.saveNewTodo},"Add"))}}]),t}(o.a.Component),b=a(11),p=function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.todo,a=e.changeStatus,n=e.removeTodo,i=e.changeMode,c=t.id,r=t.isDone,s=t.title;return o.a.createElement(o.a.Fragment,null,o.a.createElement("li",{className:"ui-state-default"+(r?" done":"")},o.a.createElement("div",{className:"checkbox"},o.a.createElement("input",{type:"checkbox",value:"",checked:r,id:"checkFor"+c,onChange:a}),o.a.createElement(b.b,{to:"/view/".concat(c)}," ",s),o.a.createElement("button",{className:"remove-item btn btn-default btn-xs pull-right",onClick:n},o.a.createElement("span",{className:"glyphicon glyphicon-remove"})),o.a.createElement(b.b,{className:"remove-item btn btn-default btn-xs pull-right",to:"/edit/".concat(c)},"Full edit"),o.a.createElement("button",{className:"remove-item btn btn-default btn-xs pull-right",type:"button",onClick:i},"Edit Title"))))}}]),t}(o.a.Component),v=function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.todo;return o.a.createElement(o.a.Fragment,null,o.a.createElement("input",{type:"text",className:"form-control",placeholder:"Enter new title...","aria-label":"Enter New title...","aria-describedby":"basic-addon2",value:e.newTitle,onChange:this.props.changeValue}),o.a.createElement("div",{className:"input-group-append"},o.a.createElement("button",{className:"btn btn-default",onClick:this.props.saveTodo},"Save"),o.a.createElement("button",{className:"btn btn-default",onClick:this.props.cancelEdit},"Cancel")))}}]),t}(o.a.Component),f=function(e){function t(e){var a;Object(r.a)(this,t);var n=(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).props.todo;return a.state={id:n.id,title:n.title,edit:n.edit,newTitle:n.title,isDone:n.isDone},a.changeMode=a.changeMode.bind(Object(u.a)(a)),a.changeValue=a.changeValue.bind(Object(u.a)(a)),a.saveTodo=a.saveTodo.bind(Object(u.a)(a)),a.cancelEdit=a.cancelEdit.bind(Object(u.a)(a)),a.changeStatus=a.changeStatus.bind(Object(u.a)(a)),a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"changeMode",value:function(){this.setState({edit:!this.state.edit})}},{key:"cancelEdit",value:function(){this.setState({edit:!1,newTitle:this.state.title})}},{key:"changeValue",value:function(e){this.setState({newTitle:e.target.value})}},{key:"saveTodo",value:function(){this.props.saveTodo(this.state.id,this.state.newTitle)}},{key:"changeStatus",value:function(e){var t=e.target.checked;this.props.changeStatus(this.state.id,t),this.setState({isDone:t})}},{key:"render",value:function(){var e=this,t=this.props.todo,a=function(){e.props.removeTodo(t.id)};return o.a.createElement("div",{className:"input-group mb-3"},e.state.edit?o.a.createElement(v,{todo:e.state,changeValue:e.changeValue,changeMode:e.changeMode,saveTodo:e.saveTodo,cancelEdit:e.cancelEdit}):o.a.createElement(p,{changeStatus:e.changeStatus,todo:e.state,removeTodo:a,onCheck:e.onCheck,changeMode:e.changeMode}))}}]),t}(o.a.Component),g=function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"loader"}),"Geting data from remote storage...")}}]),t}(o.a.Component),E=function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"resetStorage",value:function(){localStorage.clear()}},{key:"render",value:function(){return o.a.createElement("button",{className:"btn btn-default",onClick:this.resetStorage},"clear localStorage")}}]),t}(o.a.Component),O=(a(20),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={newTodoTitle:e.newTodoTitle},a.saveNewTodo=a.saveNewTodo.bind(Object(u.a)(a)),a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"saveNewTodo",value:function(e){this.props.saveTodo(void 0,e)}},{key:"RenderListOfTodos",value:function(){var e=this.props,t=e.changeStatus,a=e.removeTodo,n=e.saveTodo;return this.props.todos.map(function(e){var i=e.title,c=e.id;return o.a.createElement(f,{changeStatus:t,key:i+c,todo:e,removeTodo:a,saveTodo:n})})}},{key:"render",value:function(){return this.props.dataLoaded?o.a.createElement(o.a.Fragment,null,o.a.createElement("ul",{className:"list-unstyled"},this.RenderListOfTodos()),o.a.createElement(m,{saveNewTodo:this.saveNewTodo}),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement(E,null)):o.a.createElement(g,null)}}]),t}(o.a.Component)),j=a(12),T=function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement("p",null,"Page not Found")}}]),t}(o.a.Component);var S=function(e,t){if(!e.length)return!1;var a=t.params.todoId;if(!(a=parseInt(a))||!isNaN)return!1;var n=e.find(function(e){return e.id===a});return n||!1},y=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={id:"",newTitle:"",newDescription:"",redirectToMain:!1},a.updateValue=a.updateValue.bind(Object(u.a)(a)),a.saveUpdates=a.saveUpdates.bind(Object(u.a)(a)),a.setStatWithTodo=a.setStatWithTodo.bind(Object(u.a)(a)),a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"updateValue",value:function(e,t){var a={};a[t]=e.target.value,this.setState(a)}},{key:"saveUpdates",value:function(e){e.preventDefault();var t=this.state,a=t.id,n=t.newTitle,o=t.newDescription;this.props.saveTodo(a,n,o),this.setState({redirectToMain:!0})}},{key:"setStatWithTodo",value:function(){var e=this.props,t=e.todos,a=e.match,n=S(t,a);n&&this.setState({id:n.id,newTitle:n.title,newDescription:n.description})}},{key:"componentDidMount",value:function(){this.setStatWithTodo()}},{key:"componentDidUpdate",value:function(e){this.props.todos.length!==e.todos.length&&this.setStatWithTodo()}},{key:"render",value:function(){var e=this,t=this.props,a=t.dataLoaded,n=t.todos,i=t.match;return a?S(n,i)?!0===this.state.redirectToMain?o.a.createElement(j.a,{to:"/",from:"/view/:id"}):o.a.createElement("form",null,o.a.createElement("h2",null,"Edit todo:"),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"todoTitleEdit"},"Todo title"),o.a.createElement("input",{type:"text",onChange:function(t){return e.updateValue(t,"newTitle")},value:this.state.newTitle,className:"form-control",id:"todoTitleEdit",placeholder:"Enter title"})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"todoDescEdit"},"Todo description"),o.a.createElement("textarea",{className:"form-control",onChange:function(t){return e.updateValue(t,"newDescription")},id:"todoDescEdit",rows:"3",value:this.state.newDescription})),o.a.createElement("button",{type:"submit",className:"btn btn-primary",onClick:this.saveUpdates},"Save"),o.a.createElement(b.b,{className:"btn btn-primary",to:"/"},"Back to The list")):o.a.createElement(T,null):o.a.createElement(g,null)}}]),t}(o.a.Component),k=function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.dataLoaded,a=e.todos,n=e.match;if(!t)return o.a.createElement(g,null);var i=S(a,n);if(!i)return o.a.createElement(T,null);var c=i.title,r=i.description;return o.a.createElement(o.a.Fragment,null,o.a.createElement("article",null,o.a.createElement("h2",null,c),o.a.createElement("p",null,r)),o.a.createElement(b.b,{className:"btn btn-default btn-xs",to:"/"},"Back to The list"))}}]),t}(o.a.Component),w=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).saveTodo=function(e,t,n){if(e){var o=a.state.todos.find(function(t){return t.id===e});o.title=t,o.description=n}else{var i=a.getMaxId()+1;a.state.todos.push({id:i,title:t,description:""})}a.setState({todos:a.state.todos})},a.state={todos:[],dataLoaded:!1,localStorage:!1},a.updateNewValue=a.updateNewValue.bind(Object(u.a)(a)),a.changeStatus=a.changeStatus.bind(Object(u.a)(a)),a.removeTodo=a.removeTodo.bind(Object(u.a)(a)),a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("todos");if(t){var a=JSON.parse(t);this.setState({todos:a,dataLoaded:!0,localStorage:!0})}else setTimeout(function(){fetch("/todos.js").then(function(e){return e.json()}).then(function(t){var a=t.todos;e.setState({todos:a,dataLoaded:!0}),localStorage.setItem("todos",JSON.stringify(a))})},3e3)}},{key:"getMaxId",value:function(){var e=this.state.todos,t=-1/0;return e.forEach(function(e){e.id>t&&(t=e.id)}),t}},{key:"removeTodo",value:function(e){var t=this.state.todos.findIndex(function(t){return t.id===e});this.state.todos.splice(t,1),this.setState({todos:this.state.todos})}},{key:"updateNewValue",value:function(e,t){var a={};a[t]=e.target.value,this.setState(a)}},{key:"changeStatus",value:function(e,t){this.state.todos.find(function(t){return t.id===e}).isDone=t,this.setState({todos:this.state.todos})}},{key:"render",value:function(){var e=this,t=this.state.todos;return o.a.createElement(o.a.Fragment,null,e.state.localStorage?o.a.createElement("p",null,"loaded from localStorage"):null,o.a.createElement(b.a,null,o.a.createElement(j.d,null,o.a.createElement(j.b,{exact:!0,path:"/",render:function(a){return o.a.createElement(O,Object.assign({},a,{todos:t,saveTodo:e.saveTodo,updateNewValue:e.updateNewValue,changeStatus:e.changeStatus,removeTodo:e.removeTodo,dataLoaded:e.state.dataLoaded,localStorage:e.state.localStorage}))}}),o.a.createElement(j.b,{path:"/edit/:todoId",render:function(a){return o.a.createElement(y,Object.assign({},a,{todos:t,saveTodo:e.saveTodo,updateNewValue:e.updateNewValue,dataLoaded:e.state.dataLoaded,localStorage:e.state.localStorage}))}}),o.a.createElement(j.b,{path:"/view/:todoId",component:function(a){return o.a.createElement(k,Object.assign({},a,{todos:t,dataLoaded:e.state.dataLoaded,localStorage:e.state.localStorage}))}}),o.a.createElement(j.b,{path:"*",exact:!1,component:T}))))}}]),t}(o.a.Component);c.a.render(o.a.createElement(w,null),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.c4365951.chunk.js.map